import React, { createContext, useContext, useMemo, useState } from 'react';

type Locale = 'es' | 'en';

type Messages = Record<string, string>;

const TRANSLATIONS: Record<Locale, Messages> = {
  es: {
    'nav.validators.title': 'Validadores',
    'nav.catalogs.title': 'Catálogos',
    'nav.catalogs.quick': 'Catálogos',
    'nav.catalogs.quickView': 'Abrir catálogo',
    'nav.calculators.title': 'Calculadoras',
    'nav.reference.title': 'Referencia',
    'nav.items.rfc': 'RFC',
    'nav.items.curp': 'CURP',
    'nav.items.clabe': 'CLABE',
    'nav.items.nss': 'NSS',
    'nav.items.catalogs': 'Explorar todo',
    'nav.items.tables': 'Tablas SQLite',
    'nav.items.catalogList': 'Catálogos completos',
    'nav.items.postal': 'Códigos postales',
    'nav.items.localidades': 'Localidades',
    'nav.items.productos': 'Productos/Servicios',
    'nav.items.isr': 'ISR',
    'nav.items.iva': 'IVA',
    'nav.items.ieps': 'IEPS',
    'nav.items.reference': 'Ejemplos de código',
    
    // Hero
    'catalogs.hero.title': 'catalogmx',
    'catalogs.hero.subtitle': 'Librería de validación y catálogos para México.',
    'catalogs.hero.download': 'Descargar BD',
    'catalogs.hero.spec': 'Especificación VFS',
    'catalogs.hero.size': 'Tamaño',
    'catalogs.hero.modified': 'Actualización',
    'catalogs.hero.description': 'Documentación y demo de la librería para TypeScript, Python y Dart. Incluye validadores (RFC, CURP) y más de 58 catálogos oficiales (SAT, INEGI) en una base de datos SQLite unificada. Funciona localmente en tu navegador.',
    
    // Stats & Lists
    'catalogs.main.title': 'Catálogos disponibles',
    'catalogs.toggle.full': 'Ver catálogos completos',
    'catalogs.stats.tables': 'Catálogos',
    'catalogs.stats.rows': 'Registros',
    'catalogs.stats.modified': 'Actualizado',
    'catalogs.stats.detail': 'SAT · Banxico · INEGI',
    'catalogs.stats.rowsDetail': 'Datos oficiales',
    'catalogs.feature.table': 'Tabla',
    'catalogs.feature.open': 'Abrir',
    'catalogs.list.title': 'Catálogos completos',
    'catalogs.list.subtitle': 'Explora los 58 catálogos oficiales con búsqueda por nombre y descripción.',
    'tables.title': 'Tablas de mexico.sqlite3',
    'tables.subtitle': 'Busca y navega cualquier tabla del archivo consolidado.',
    'tables.search.placeholder': 'Buscar catálogo (ej. bancos, municipios, claves)…',
    'tables.error': 'No se pudieron leer las tablas desde mexico.sqlite3.',
    'tables.loading': 'Cargando tablas…',
    'tables.empty': 'Sin resultados',

    // Validators
    'validators.rfc.title': 'Validador de RFC',
    'validators.rfc.subtitle': 'Registro Federal de Contribuyentes - Identificación fiscal mexicana',
    'validators.rfc.card.validate': 'Validar RFC',
    'validators.rfc.card.validate.desc': 'Ingresa un RFC para validar su formato, fecha y dígito verificador',
    'validators.rfc.label': 'RFC',
    'validators.rfc.placeholder': 'XAXX010101000',
    'validators.rfc.button.validate': 'Validar',
    'validators.rfc.status.valid': 'RFC Válido',
    'validators.rfc.status.invalid': 'RFC Inválido',
    'validators.rfc.details': 'Detalles de validación',
    'validators.rfc.format': 'Formato',
    'validators.rfc.date': 'Fecha',
    'validators.rfc.checksum': 'Dígito verificador',
    'validators.rfc.parsed': 'Componentes extraídos',
    'validators.rfc.initials': 'Iniciales',
    'validators.rfc.homoclave': 'Homoclave',
    'validators.rfc.checkDigit': 'Dígito',
    'validators.rfc.generate.title': 'Generar RFC',
    'validators.rfc.generate.desc': 'Genera un RFC completo con datos personales (homoclave + checksum incluidos)',
    'validators.rfc.generate.name': 'Nombre(s)',
    'validators.rfc.generate.paterno': 'Apellido Paterno',
    'validators.rfc.generate.materno': 'Apellido Materno',
    'validators.rfc.generate.birthdate': 'Fecha de Nacimiento',
    'validators.rfc.generate.button': 'Generar',
    'validators.rfc.generate.result': 'RFC Generado',
    'validators.rfc.generate.note': 'Usa fórmulas del SAT para homoclave y checksum; ingresa fecha como AAAA-MM-DD.',
    'validators.rfc.docs.title': 'Estructura del RFC',
    'validators.rfc.docs.pf': 'Persona Física (13 caracteres): 4 letras + 6 dígitos fecha + 3 caracteres homoclave',
    'validators.rfc.docs.pm': 'Persona Moral (12 caracteres): 3 letras + 6 dígitos fecha + 3 caracteres homoclave',
    'validators.rfc.docs.special': 'RFCs Especiales:',
    'validators.rfc.docs.generic': 'Genérico nacional',
    'validators.rfc.docs.foreign': 'Genérico extranjero',

    'validators.curp.title': 'Validador de CURP',
    'validators.curp.subtitle': 'Clave Única de Registro de Población - Identificación personal mexicana',
    'validators.curp.card.validate': 'Validar CURP',
    'validators.curp.card.validate.desc': 'Ingresa una CURP para validar y extraer información',
    'validators.curp.label': 'CURP',
    'validators.curp.placeholder': 'GARC850101HDFRRL09',
    'validators.curp.button.validate': 'Validar',
    'validators.curp.status.valid': 'CURP Válida',
    'validators.curp.status.invalid': 'CURP Inválida',
    'validators.curp.extracted': 'Información extraída',
    'validators.curp.birthdate': 'Fecha de Nacimiento',
    'validators.curp.gender': 'Sexo',
    'validators.curp.state': 'Entidad de Nacimiento',
    'validators.curp.initials': 'Iniciales',
    'validators.curp.consonants': 'Consonantes',
    'validators.curp.differentiator': 'Diferenciador',
    'validators.curp.checkDigit': 'Dígito Verificador',
    'validators.curp.generate.title': 'Generar CURP',
    'validators.curp.generate.desc': 'Genera una CURP a partir de datos personales',
    'validators.curp.generate.name': 'Nombre(s)',
    'validators.curp.generate.paterno': 'Apellido Paterno',
    'validators.curp.generate.materno': 'Apellido Materno',
    'validators.curp.generate.birthdate': 'Fecha de Nacimiento',
    'validators.curp.generate.gender': 'Sexo',
    'validators.curp.generate.state': 'Entidad de Nacimiento',
    'validators.curp.generate.button': 'Generar',
    'validators.curp.generate.result': 'CURP Generada',
    'validators.curp.docs.title': 'Estructura CURP (18 caracteres)',
    'validators.curp.gender.male': 'Masculino (H)',
    'validators.curp.gender.female': 'Femenino (M)',

    'validators.clabe.title': 'Validador de CLABE',
    'validators.clabe.subtitle': 'Clave Bancaria Estandarizada - Número de cuenta bancaria estandarizado',
    'validators.clabe.card.validate': 'Validar CLABE',
    'validators.clabe.card.validate.desc': 'Ingresa una CLABE de 18 dígitos para validar y extraer información bancaria',
    'validators.clabe.label': 'CLABE',
    'validators.clabe.placeholder': '002010077777777771',
    'validators.clabe.button.validate': 'Validar',
    'validators.clabe.status.valid': 'CLABE Válida',
    'validators.clabe.status.invalid': 'CLABE Inválida',
    'validators.clabe.bankInfo': 'Información Bancaria',
    'validators.clabe.bank': 'Banco',
    'validators.clabe.branch': 'Sucursal',
    'validators.clabe.account': 'Cuenta',
    'validators.clabe.checkDigit': 'Dígito Verificador',
    'validators.clabe.docs.title': 'Estructura CLABE',
    'validators.clabe.docs.bank': 'Código de Banco (3 dígitos) - Asignado por Banxico',
    'validators.clabe.docs.branch': 'Código de Plaza (3 dígitos) - Sucursal o plaza',
    'validators.clabe.docs.account': 'Número de Cuenta (11 dígitos)',
    'validators.clabe.docs.check': 'Dígito Verificador (1 dígito) - Validación',
    'validators.clabe.docs.algo': 'Algoritmo de Dígito Verificador',
    'validators.clabe.docs.algo.desc': 'Suma ponderada con factores [3, 7, 1] repetidos modulo 10.',
    'validators.clabe.docs.common': 'Códigos de Banco Comunes',

    'validators.nss.title': 'Validador de NSS',
    'validators.nss.subtitle': 'Número de Seguridad Social - IMSS',
    'validators.nss.card.validate': 'Validar NSS',
    'validators.nss.card.validate.desc': 'Ingresa un NSS de 11 dígitos para validar y extraer información de registro',
    'validators.nss.label': 'NSS',
    'validators.nss.placeholder': '12345678901',
    'validators.nss.button.validate': 'Validar',
    'validators.nss.status.valid': 'NSS Válido',
    'validators.nss.status.invalid': 'NSS Inválido',
    'validators.nss.regInfo': 'Información de Registro',
    'validators.nss.subdelegation': 'Subdelegación',
    'validators.nss.subdelegation.desc': 'Oficina regional IMSS',
    'validators.nss.regYear': 'Año de Registro',
    'validators.nss.birthYear': 'Año de Nacimiento',
    'validators.nss.sequential': 'Número Secuencial',
    'validators.nss.docs.title': 'Estructura NSS',
    'validators.nss.docs.desc': 'Número de Seguridad Social IMSS de 11 dígitos',
    'validators.nss.docs.algo': 'Algoritmo de Dígito Verificador (Variante Luhn)',
    'validators.nss.docs.about': 'Sobre el IMSS',
    'validators.nss.docs.about.desc': 'El NSS es asignado a los trabajadores cuando se registran por primera vez en el IMSS y permanece igual durante toda su vida laboral.',

    // Calculators
    'calculators.isr.title': 'Calculadora de ISR',
    'calculators.isr.subtitle': 'Impuesto Sobre la Renta - Tablas 2024 y subsidio al empleo',
    'calculators.isr.card.title': 'Calcular ISR',
    'calculators.isr.card.desc': 'Ingresa el ingreso gravable para calcular el ISR con desglose',
    'calculators.isr.label.income': 'Ingreso Gravable (MXN)',
    'calculators.isr.label.period': 'Periodo',
    'calculators.isr.period.monthly': 'Mensual',
    'calculators.isr.period.biweekly': 'Quincenal',
    'calculators.isr.period.weekly': 'Semanal',
    'calculators.isr.period.annual': 'Anual',
    'calculators.isr.button.calculate': 'Calcular ISR',
    'calculators.isr.result.pay': 'ISR a Pagar',
    'calculators.isr.result.rate': 'Tasa Efectiva',
    'calculators.isr.steps.title': 'Desglose del Cálculo',
    'calculators.isr.bracket.title': 'Tarifa Aplicada',
    'calculators.isr.bracket.lower': 'Límite Inferior',
    'calculators.isr.bracket.upper': 'Límite Superior',
    'calculators.isr.bracket.fixed': 'Cuota Fija',
    'calculators.isr.bracket.rate': 'Porcentaje',
    'calculators.isr.info.brackets': 'Tarifas Mensuales 2024',
    'calculators.isr.info.subsidy': 'Subsidio al Empleo',
    'calculators.isr.info.subsidy.desc': 'El subsidio al empleo reduce el ISR para trabajadores de bajos ingresos. Aplica a ingresos mensuales hasta $7,382.33 y puede resultar en cero ISR o un saldo a favor.',

    'calculators.iva.title': 'Calculadora de IVA',
    'calculators.iva.subtitle': 'Impuesto al Valor Agregado',
    'calculators.iva.card.calc.title': 'Calcular IVA desde Base',
    'calculators.iva.card.calc.desc': 'Ingresa el monto base para calcular el IVA y el total',
    'calculators.iva.card.reverse.title': 'Desglosar IVA del Total',
    'calculators.iva.card.reverse.desc': 'Ingresa el monto total para extraer la base y el IVA',
    'calculators.iva.label.base': 'Monto Base (MXN)',
    'calculators.iva.label.total': 'Monto Total (MXN)',
    'calculators.iva.label.rate': 'Tasa de IVA',
    'calculators.iva.rate.16': '16% (General)',
    'calculators.iva.rate.8': '8% (Frontera)',
    'calculators.iva.rate.0': '0% (Exento)',
    'calculators.iva.button.calculate': 'Calcular',
    'calculators.iva.button.extract': 'Desglosar',
    'calculators.iva.result.base': 'Base (Subtotal)',
    'calculators.iva.result.iva': 'IVA',
    'calculators.iva.result.total': 'Total',
    'calculators.iva.info.16.title': 'Tasa General',
    'calculators.iva.info.16.desc': 'La tasa general de IVA en México es del 16%. Aplica a la mayoría de bienes y servicios en todo el país.',
    'calculators.iva.info.8.title': 'Tasa Fronteriza',
    'calculators.iva.info.8.desc': 'Una tasa reducida del 8% aplica en las zonas fronterizas norte y sur como estímulo fiscal.',
    'calculators.iva.info.0.title': 'Tasa 0% / Exento',
    'calculators.iva.info.0.desc': 'Ciertos bienes esenciales están gravados al 0% (alimentos básicos, medicinas). Otros están exentos (servicios médicos, venta de casa habitación).',
    'calculators.iva.formula.title': 'Fórmula de Cálculo',
    'calculators.iva.formula.base': 'De Base a Total',
    'calculators.iva.formula.total': 'De Total a Base',

    'calculators.ieps.title': 'Calculadora de IEPS',
    'calculators.ieps.subtitle': 'Impuesto Especial sobre Producción y Servicios',
    'calculators.ieps.card.calc.title': 'Calcular IEPS',
    'calculators.ieps.card.calc.desc': 'Selecciona un tipo de producto e ingresa el monto base',
    'calculators.ieps.label.base': 'Monto Base (MXN)',
    'calculators.ieps.label.product': 'Tipo de Producto',
    'calculators.ieps.button.calculate': 'Calcular',
    'calculators.ieps.result.base': 'Base',
    'calculators.ieps.result.total': 'Total',
    'calculators.ieps.info.rates': 'Tasas de IEPS',
    'calculators.ieps.info.about': 'Sobre el IEPS',
    'calculators.ieps.info.about.desc': 'El IEPS es un impuesto que se paga por la producción y venta o importación de gasolinas, alcoholes, cerveza y tabacos, entre otros bienes.',
    'calculators.ieps.info.cascade': 'Efecto Cascada',
    'calculators.ieps.info.cascade.desc': 'Cuando un producto tiene IEPS e IVA, primero se suma el IEPS a la base y sobre ese subtotal se calcula el IVA.',
  },
  en: {
    'nav.validators.title': 'Validators',
    'nav.catalogs.title': 'Catalogs',
    'nav.catalogs.quick': 'Catalogs',
    'nav.catalogs.quickView': 'Open catalog',
    'nav.calculators.title': 'Calculators',
    'nav.reference.title': 'Reference',
    'nav.items.rfc': 'RFC',
    'nav.items.curp': 'CURP',
    'nav.items.clabe': 'CLABE',
    'nav.items.nss': 'NSS',
    'nav.items.catalogs': 'Browse All',
    'nav.items.tables': 'SQLite Tables',
    'nav.items.catalogList': 'All Catalogs',
    'nav.items.postal': 'Postal Codes',
    'nav.items.localidades': 'Localities',
    'nav.items.productos': 'Products/Services',
    'nav.items.isr': 'ISR',
    'nav.items.iva': 'IVA',
    'nav.items.ieps': 'IEPS',
    'nav.items.reference': 'Code Examples',
    
    // Hero
    'catalogs.hero.title': 'catalogmx',
    'catalogs.hero.subtitle': 'Validation and catalog library for Mexico.',
    'catalogs.hero.download': 'Download DB',
    'catalogs.hero.spec': 'VFS Spec',
    'catalogs.hero.size': 'Size',
    'catalogs.hero.modified': 'Last modified',
    'catalogs.hero.description': 'Documentation and demo for TypeScript, Python, and Dart. Includes validators (RFC, CURP) and 58+ official catalogs (SAT, INEGI) in a unified SQLite database. Works locally in your browser.',
    
    // Stats & Lists
    'catalogs.main.title': 'Available Catalogs',
    'catalogs.toggle.full': 'View all catalogs',
    'catalogs.stats.tables': 'Catalogs',
    'catalogs.stats.rows': 'Records',
    'catalogs.stats.modified': 'Last updated',
    'catalogs.stats.detail': 'SAT · Banxico · INEGI',
    'catalogs.stats.rowsDetail': 'Official data',
    'catalogs.feature.table': 'Table',
    'catalogs.feature.open': 'Open',
    'catalogs.list.title': 'All catalogs',
    'catalogs.list.subtitle': 'Browse the 58 official catalogs with search by name and description.',
    'tables.title': 'Tables in mexico.sqlite3',
    'tables.subtitle': 'Search and navigate any table in the consolidated file.',
    'tables.search.placeholder': 'Search catalog (e.g. banks, municipalities)…',
    'tables.error': 'Could not read tables from mexico.sqlite3.',
    'tables.loading': 'Loading tables…',
    'tables.empty': 'No results',

    // Validators
    'validators.rfc.title': 'RFC Validator',
    'validators.rfc.subtitle': 'Registro Federal de Contribuyentes - Mexican tax identification number',
    'validators.rfc.card.validate': 'Validate RFC',
    'validators.rfc.card.validate.desc': 'Enter an RFC to validate its format, date, and check digit',
    'validators.rfc.label': 'RFC',
    'validators.rfc.placeholder': 'XAXX010101000',
    'validators.rfc.button.validate': 'Validate',
    'validators.rfc.status.valid': 'Valid RFC',
    'validators.rfc.status.invalid': 'Invalid RFC',
    'validators.rfc.details': 'Validation Details',
    'validators.rfc.format': 'Format',
    'validators.rfc.date': 'Date',
    'validators.rfc.checksum': 'Checksum',
    'validators.rfc.parsed': 'Parsed Components',
    'validators.rfc.initials': 'Initials',
    'validators.rfc.homoclave': 'Homoclave',
    'validators.rfc.checkDigit': 'Check Digit',
    'validators.rfc.generate.title': 'Generate RFC',
    'validators.rfc.generate.desc': 'Generate a full RFC from personal data (homoclave + checksum included)',
    'validators.rfc.generate.name': 'First Name',
    'validators.rfc.generate.paterno': 'Paternal Surname',
    'validators.rfc.generate.materno': 'Maternal Surname',
    'validators.rfc.generate.birthdate': 'Birth Date',
    'validators.rfc.generate.button': 'Generate',
    'validators.rfc.generate.result': 'Generated RFC',
    'validators.rfc.generate.note': 'Uses SAT homoclave and checksum formulas; enter date as YYYY-MM-DD.',
    'validators.rfc.docs.title': 'RFC Structure',
    'validators.rfc.docs.pf': 'Persona Física (13 chars): 4 letters + 6 digit date + 3 char homoclave',
    'validators.rfc.docs.pm': 'Persona Moral (12 chars): 3 letters + 6 digit date + 3 char homoclave',
    'validators.rfc.docs.special': 'Special RFCs:',
    'validators.rfc.docs.generic': 'Generic RFC for national operations',
    'validators.rfc.docs.foreign': 'Generic RFC for foreign operations',

    'validators.curp.title': 'CURP Validator',
    'validators.curp.subtitle': 'Clave Única de Registro de Población - Mexican personal identification number',
    'validators.curp.card.validate': 'Validate CURP',
    'validators.curp.card.validate.desc': 'Enter a CURP to validate and extract information',
    'validators.curp.label': 'CURP',
    'validators.curp.placeholder': 'GARC850101HDFRRL09',
    'validators.curp.button.validate': 'Validate',
    'validators.curp.status.valid': 'Valid CURP',
    'validators.curp.status.invalid': 'Invalid CURP',
    'validators.curp.extracted': 'Extracted Information',
    'validators.curp.birthdate': 'Birth Date',
    'validators.curp.gender': 'Gender',
    'validators.curp.state': 'State of Birth',
    'validators.curp.initials': 'Initials',
    'validators.curp.consonants': 'Consonants',
    'validators.curp.differentiator': 'Differentiator',
    'validators.curp.checkDigit': 'Check Digit',
    'validators.curp.generate.title': 'Generate CURP',
    'validators.curp.generate.desc': 'Generate a CURP from personal data',
    'validators.curp.generate.name': 'First Name',
    'validators.curp.generate.paterno': 'Paternal Surname',
    'validators.curp.generate.materno': 'Maternal Surname',
    'validators.curp.generate.birthdate': 'Birth Date',
    'validators.curp.generate.gender': 'Gender',
    'validators.curp.generate.state': 'State of Birth',
    'validators.curp.generate.button': 'Generate',
    'validators.curp.generate.result': 'Generated CURP',
    'validators.curp.docs.title': 'CURP Structure (18 characters)',
    'validators.curp.gender.male': 'Male (H)',
    'validators.curp.gender.female': 'Female (M)',

    'validators.clabe.title': 'CLABE Validator',
    'validators.clabe.subtitle': 'Clave Bancaria Estandarizada - Mexican standardized bank account number',
    'validators.clabe.card.validate': 'Validate CLABE',
    'validators.clabe.card.validate.desc': 'Enter an 18-digit CLABE to validate and extract bank information',
    'validators.clabe.label': 'CLABE',
    'validators.clabe.placeholder': '002010077777777771',
    'validators.clabe.button.validate': 'Validate',
    'validators.clabe.status.valid': 'Valid CLABE',
    'validators.clabe.status.invalid': 'Invalid CLABE',
    'validators.clabe.bankInfo': 'Bank Information',
    'validators.clabe.bank': 'Bank',
    'validators.clabe.branch': 'Branch',
    'validators.clabe.account': 'Account Number',
    'validators.clabe.checkDigit': 'Check Digit',
    'validators.clabe.docs.title': 'CLABE Structure',
    'validators.clabe.docs.bank': 'Bank Code (3 digits) - Assigned by Banxico',
    'validators.clabe.docs.branch': 'Branch Code (3 digits) - Branch or plaza',
    'validators.clabe.docs.account': 'Account Number (11 digits)',
    'validators.clabe.docs.check': 'Check Digit (1 digit) - Validation',
    'validators.clabe.docs.algo': 'Check Digit Algorithm',
    'validators.clabe.docs.algo.desc': 'The check digit is calculated using a weighted sum with factors [3, 7, 1] repeating modulo 10.',
    'validators.clabe.docs.common': 'Common Bank Codes',

    'validators.nss.title': 'NSS Validator',
    'validators.nss.subtitle': 'Numero de Seguridad Social - Mexican Social Security Number (IMSS)',
    'validators.nss.card.validate': 'Validate NSS',
    'validators.nss.card.validate.desc': 'Enter an 11-digit NSS to validate and extract registration info',
    'validators.nss.label': 'NSS',
    'validators.nss.placeholder': '12345678901',
    'validators.nss.button.validate': 'Validate',
    'validators.nss.status.valid': 'Valid NSS',
    'validators.nss.status.invalid': 'Invalid NSS',
    'validators.nss.regInfo': 'Registration Information',
    'validators.nss.subdelegation': 'Subdelegation',
    'validators.nss.subdelegation.desc': 'IMSS regional office',
    'validators.nss.regYear': 'Registration Year',
    'validators.nss.birthYear': 'Birth Year',
    'validators.nss.sequential': 'Sequential Number',
    'validators.nss.docs.title': 'NSS Structure',
    'validators.nss.docs.desc': '11-digit IMSS Social Security Number',
    'validators.nss.docs.algo': 'Check Digit Algorithm (Luhn Variant)',
    'validators.nss.docs.about': 'About IMSS',
    'validators.nss.docs.about.desc': 'Instituto Mexicano del Seguro Social (IMSS) is Mexico\'s social security institution. The NSS is assigned to workers when they first register with IMSS and remains the same throughout their working life.',

    // Calculators
    'calculators.isr.title': 'ISR Calculator',
    'calculators.isr.subtitle': 'Impuesto Sobre la Renta - Mexican income tax with 2024 brackets and employment subsidy',
    'calculators.isr.card.title': 'Calculate ISR',
    'calculators.isr.card.desc': 'Enter taxable income to calculate ISR with step-by-step breakdown',
    'calculators.isr.label.income': 'Taxable Income (MXN)',
    'calculators.isr.label.period': 'Period',
    'calculators.isr.period.monthly': 'Monthly',
    'calculators.isr.period.biweekly': 'Biweekly',
    'calculators.isr.period.weekly': 'Weekly',
    'calculators.isr.period.annual': 'Annual',
    'calculators.isr.button.calculate': 'Calculate ISR',
    'calculators.isr.result.pay': 'ISR to Pay',
    'calculators.isr.result.rate': 'Effective Rate',
    'calculators.isr.steps.title': 'Step-by-Step Calculation',
    'calculators.isr.bracket.title': 'Applied Bracket',
    'calculators.isr.bracket.lower': 'Lower Limit',
    'calculators.isr.bracket.upper': 'Upper Limit',
    'calculators.isr.bracket.fixed': 'Fixed Fee',
    'calculators.isr.bracket.rate': 'Marginal Rate',
    'calculators.isr.info.brackets': '2024 Monthly Brackets',
    'calculators.isr.info.subsidy': 'Employment Subsidy',
    'calculators.isr.info.subsidy.desc': 'The employment subsidy (subsidio al empleo) reduces ISR for low-income workers. It applies to monthly incomes up to $7,382.33 and can result in zero or even negative ISR (refund).',

    'calculators.iva.title': 'IVA Calculator',
    'calculators.iva.subtitle': 'Impuesto al Valor Agregado - Mexican Value Added Tax',
    'calculators.iva.card.calc.title': 'Calculate IVA from Base',
    'calculators.iva.card.calc.desc': 'Enter base amount to calculate IVA and total',
    'calculators.iva.card.reverse.title': 'Extract IVA from Total',
    'calculators.iva.card.reverse.desc': 'Enter total amount to extract base and IVA',
    'calculators.iva.label.base': 'Base Amount (MXN)',
    'calculators.iva.label.total': 'Total Amount (MXN)',
    'calculators.iva.label.rate': 'IVA Rate',
    'calculators.iva.rate.16': '16% (Standard)',
    'calculators.iva.rate.8': '8% (Border Zone)',
    'calculators.iva.rate.0': '0% (Exempt)',
    'calculators.iva.button.calculate': 'Calculate',
    'calculators.iva.button.extract': 'Extract',
    'calculators.iva.result.base': 'Base (Subtotal)',
    'calculators.iva.result.iva': 'IVA',
    'calculators.iva.result.total': 'Total',
    'calculators.iva.info.16.title': 'Standard Rate',
    'calculators.iva.info.16.desc': 'The general IVA rate in Mexico is 16%. This applies to most goods and services throughout the country.',
    'calculators.iva.info.8.title': 'Border Zone Rate',
    'calculators.iva.info.8.desc': 'A reduced rate of 8% applies in the northern and southern border zones (franja fronteriza) as an economic stimulus measure.',
    'calculators.iva.info.0.title': 'Zero Rate / Exempt',
    'calculators.iva.info.0.desc': 'Certain essential goods are taxed at 0% rate, including basic food items, medicines, and books. Exempt items include housing sales and medical services.',
    'calculators.iva.formula.title': 'IVA Calculation Formula',
    'calculators.iva.formula.base': 'From Base to Total',
    'calculators.iva.formula.total': 'From Total to Base',

    'calculators.ieps.title': 'IEPS Calculator',
    'calculators.ieps.subtitle': 'Impuesto Especial sobre Produccion y Servicios - Special Tax on Production and Services',
    'calculators.ieps.card.calc.title': 'Calculate IEPS',
    'calculators.ieps.card.calc.desc': 'Select a product type and enter base amount',
    'calculators.ieps.label.base': 'Base Amount (MXN)',
    'calculators.ieps.label.product': 'Product Type',
    'calculators.ieps.button.calculate': 'Calculate',
    'calculators.ieps.result.base': 'Base',
    'calculators.ieps.result.total': 'Total',
    'calculators.ieps.info.rates': 'IEPS Rates Reference',
    'calculators.ieps.info.about': 'About IEPS',
    'calculators.ieps.info.about.desc': 'IEPS (Impuesto Especial sobre Produccion y Servicios) is a special tax applied to specific goods and services that the government wants to regulate or discourage, or that have significant externalities.',
    'calculators.ieps.info.cascade': 'Tax Cascade Effect',
    'calculators.ieps.info.cascade.desc': 'When a product is subject to both IEPS and IVA, the calculation order is: Apply IEPS to base price, Add IEPS to get subtotal, Apply IVA (16%) to subtotal.',
  },
};

interface LocaleContextValue {
  locale: Locale;
  setLocale: (l: Locale) => void;
  t: (key: string) => string;
}

const LocaleContext = createContext<LocaleContextValue | undefined>(undefined);

export function LocaleProvider({ children }: { children: React.ReactNode }) {
  const [locale, setLocale] = useState<Locale>('es');

  const value = useMemo<LocaleContextValue>(() => {
    const messages = TRANSLATIONS[locale] || TRANSLATIONS.es;
    const t = (key: string) => messages[key] ?? TRANSLATIONS.en[key] ?? key;
    return { locale, setLocale, t };
  }, [locale]);

  return <LocaleContext.Provider value={value}>{children}</LocaleContext.Provider>;
}

export function useLocale(): LocaleContextValue {
  const ctx = useContext(LocaleContext);
  if (!ctx) {
    throw new Error('useLocale must be used within LocaleProvider');
  }
  return ctx;
}
